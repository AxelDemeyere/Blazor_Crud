@using BlazorDemo.Shared.Models
@using System.Globalization

<div class="card border-0">
    <div class="card-header d-flex justify-content-between align-items-center bg-dark text-white border-light border-bottom-1">
        <span>📦 Produits</span>
    </div>
    <div class="card-body p-0">
        @if (Chargement)
        {
            <div class="text-center py-4">
                <div class="spinner-border text-primary"></div>
                <p class="mt-2">Chargement...</p>
            </div>
        }
        else if (Produits == null || !Produits.Any())
        {
            <div class="alert alert-info">Aucun produit disponible.</div>
        }
        else
        {
            <table class="table table-striped table-hover mb-0">
                <thead>
                <tr><th>ID</th><th>Nom</th><th>Catégorie</th><th>Prix</th><th>Stock</th><th>Status</th><th>Actions</th></tr>
                </thead>
                <tbody>
                @foreach (var p in Produits)
                {
                    <tr>
                        <td>@p.Id</td>
                        <td>
                            <div class="d-flex flex-column">
                                <span class="fw-semibold">@p.Nom</span>
                                <small class="text-muted text-truncate" style="max-width: 200px;" title="@p.Description">@p.Description</small>
                            </div>
                        </td>
                        <td>@p.Categorie</td>
                        <td class="text-success fw-bold">@p.Prix.ToString("C", CultureInfo.GetCultureInfo("fr-FR"))</td>
                        <td><span class="badge @(p.Stock > 0 ? "bg-success" : "bg-danger")">@p.Stock</span></td>
                        <td>
                            @if (p.EstActif)
                            {
                                <span class="badge bg-primary">Actif</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">Inactif</span>
                            }
                        </td>
                        <td>
                            <div class="d-flex gap-1">
                                <button class="btn btn-sm btn-outline-primary" @onclick="() => OnModifier.InvokeAsync(p.Id)" title="Modifier">✏️</button>
                                <button class="btn btn-sm btn-outline-danger" @onclick="() => OnSupprimer.InvokeAsync(p.Id)" title="Supprimer">🗑️</button>
                            </div>
                        </td>
                    </tr>
                }
                </tbody>
            </table>
        }
    </div>
</div>

