<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/BlazorDemo.Client/Components/TableauProduit.razor">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/BlazorDemo.Client/Components/TableauProduit.razor" />
              <option name="originalContent" value="@using BlazorDemo.Shared.Models&#10;@using System.Globalization&#10;&#10;&lt;div class=&quot;card border-0&quot;&gt;&#10;    &lt;div class=&quot;card-header d-flex justify-content-between align-items-center bg-dark text-white border-light border-bottom-1&quot;&gt;&#10;        &lt;span&gt; Produits&lt;/span&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;card-body p-0&quot;&gt;&#10;        @if (Chargement)&#10;        {&#10;            &lt;div class=&quot;text-center py-4&quot;&gt;&#10;                &lt;div class=&quot;spinner-border text-primary&quot;&gt;&lt;/div&gt;&#10;                &lt;p class=&quot;mt-2&quot;&gt;Chargement...&lt;/p&gt;&#10;            &lt;/div&gt;&#10;        }&#10;        else if (Produits == null || !Produits.Any())&#10;        {&#10;            &lt;div class=&quot;alert alert-info&quot;&gt;Aucun produit disponible.&lt;/div&gt;&#10;        }&#10;        else&#10;        {&#10;            &lt;table class=&quot;table table-striped table-hover mb-0&quot;&gt;&#10;                &lt;thead&gt;&#10;                &lt;tr&gt;&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;Nom&lt;/th&gt;&lt;th&gt;Catégorie&lt;/th&gt;&lt;th&gt;Prix&lt;/th&gt;&lt;th&gt;Stock&lt;/th&gt;&lt;th&gt;Status&lt;/th&gt;&lt;th&gt;Actions&lt;/th&gt;&lt;/tr&gt;&#10;                &lt;/thead&gt;&#10;                &lt;tbody&gt;&#10;                @foreach (var p in Produits)&#10;                {&#10;                    &lt;tr&gt;&#10;                        &lt;td&gt;@p.Id&lt;/td&gt;&#10;                        &lt;td&gt;&#10;                            &lt;div class=&quot;d-flex flex-column&quot;&gt;&#10;                                &lt;span class=&quot;fw-semibold&quot;&gt;@p.Nom&lt;/span&gt;&#10;                                &lt;small class=&quot;text-muted text-truncate&quot; style=&quot;max-width: 200px;&quot; title=&quot;@p.Description&quot;&gt;@p.Description&lt;/small&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/td&gt;&#10;                        &lt;td&gt;@p.Categorie&lt;/td&gt;&#10;                        &lt;td class=&quot;text-success fw-bold&quot;&gt;@p.Prix.ToString(&quot;C&quot;, CultureInfo.GetCultureInfo(&quot;fr-FR&quot;))&lt;/td&gt;&#10;                        &lt;td&gt;&lt;span class=&quot;badge @(p.Stock &gt; 0 ? &quot;bg-success&quot; : &quot;bg-danger&quot;)&quot;&gt;@p.Stock&lt;/span&gt;&lt;/td&gt;&#10;                        &lt;td&gt;&#10;                            @if (p.EstActif)&#10;                            {&#10;                                &lt;span class=&quot;badge bg-primary&quot;&gt;Actif&lt;/span&gt;&#10;                            }&#10;                            else&#10;                            {&#10;                                &lt;span class=&quot;badge bg-secondary&quot;&gt;Inactif&lt;/span&gt;&#10;                            }&#10;                        &lt;/td&gt;&#10;                        &lt;td&gt;&#10;                            &lt;div class=&quot;d-flex gap-1&quot;&gt;&#10;                                &lt;button class=&quot;btn btn-sm btn-outline-primary&quot; @onclick=&quot;() =&gt; OnModifier.InvokeAsync(p.Id)&quot; title=&quot;Modifier&quot;&gt;✏️&lt;/button&gt;&#10;                                &lt;button class=&quot;btn btn-sm btn-outline-danger&quot; @onclick=&quot;() =&gt; OnSupprimer.InvokeAsync(p.Id)&quot; title=&quot;Supprimer&quot;&gt;️&lt;/button&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/td&gt;&#10;                    &lt;/tr&gt;&#10;                }&#10;                &lt;/tbody&gt;&#10;            &lt;/table&gt;&#10;        }&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;" />
              <option name="updatedContent" value="@using BlazorDemo.Shared.Models&#10;@using System.Globalization&#10;&#10;&lt;div class=&quot;card border-0&quot;&gt;&#10;    &lt;div class=&quot;card-header d-flex justify-content-between align-items-center bg-dark text-white border-light border-bottom-1&quot;&gt;&#10;        &lt;span&gt; Produits&lt;/span&gt;&#10;    &lt;/div&gt;&#10;    &lt;div class=&quot;card-body p-0&quot;&gt;&#10;        @if (Chargement)&#10;        {&#10;            &lt;div class=&quot;text-center py-4&quot;&gt;&#10;                &lt;div class=&quot;spinner-border text-primary&quot;&gt;&lt;/div&gt;&#10;                &lt;p class=&quot;mt-2&quot;&gt;Chargement...&lt;/p&gt;&#10;            &lt;/div&gt;&#10;        }&#10;        else if (Produits == null || !Produits.Any())&#10;        {&#10;            &lt;div class=&quot;alert alert-info&quot;&gt;Aucun produit disponible.&lt;/div&gt;&#10;        }&#10;        else&#10;        {&#10;            &lt;table class=&quot;table table-striped table-hover mb-0&quot;&gt;&#10;                &lt;thead&gt;&#10;                &lt;tr&gt;&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;Nom&lt;/th&gt;&lt;th&gt;Catégorie&lt;/th&gt;&lt;th&gt;Prix&lt;/th&gt;&lt;th&gt;Stock&lt;/th&gt;&lt;th&gt;Status&lt;/th&gt;&lt;th&gt;Actions&lt;/th&gt;&lt;/tr&gt;&#10;                &lt;/thead&gt;&#10;                &lt;tbody&gt;&#10;                @foreach (var p in Produits)&#10;                {&#10;                    &lt;tr&gt;&#10;                        &lt;td&gt;@p.Id&lt;/td&gt;&#10;                        &lt;td&gt;&#10;                            &lt;div class=&quot;d-flex flex-column&quot;&gt;&#10;                                &lt;span class=&quot;fw-semibold&quot;&gt;@p.Nom&lt;/span&gt;&#10;                                &lt;small class=&quot;text-muted text-truncate&quot; style=&quot;max-width: 200px;&quot; title=&quot;@p.Description&quot;&gt;@p.Description&lt;/small&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/td&gt;&#10;                        &lt;td&gt;@p.Categorie&lt;/td&gt;&#10;                        &lt;td class=&quot;text-success fw-bold&quot;&gt;@p.Prix.ToString(&quot;C&quot;, CultureInfo.GetCultureInfo(&quot;fr-FR&quot;))&lt;/td&gt;&#10;                        &lt;td&gt;&lt;span class=&quot;badge @(p.Stock &gt; 0 ? &quot;bg-success&quot; : &quot;bg-danger&quot;)&quot;&gt;@p.Stock&lt;/span&gt;&lt;/td&gt;&#10;                        &lt;td&gt;&#10;                            @if (p.EstActif)&#10;                            {&#10;                                &lt;span class=&quot;badge bg-primary&quot;&gt;Actif&lt;/span&gt;&#10;                            }&#10;                            else&#10;                            {&#10;                                &lt;span class=&quot;badge bg-secondary&quot;&gt;Inactif&lt;/span&gt;&#10;                            }&#10;                        &lt;/td&gt;&#10;                        &lt;td&gt;&#10;                            &lt;div class=&quot;d-flex gap-1&quot;&gt;&#10;                                &lt;button class=&quot;btn btn-sm btn-outline-primary&quot; @onclick=&quot;() =&gt; OnModifier.InvokeAsync(p.Id)&quot; title=&quot;Modifier&quot;&gt;✏️&lt;/button&gt;&#10;                                &lt;button class=&quot;btn btn-sm btn-outline-danger&quot; @onclick=&quot;() =&gt; OnSupprimer.InvokeAsync(p.Id)&quot; title=&quot;Supprimer&quot;&gt;️&lt;/button&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/td&gt;&#10;                    &lt;/tr&gt;&#10;                }&#10;                &lt;/tbody&gt;&#10;            &lt;/table&gt;&#10;        }&#10;    &lt;/div&gt;&#10;&lt;/div&gt;&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/BlazorDemo.Client/Pages/TP_CRUD/Produit.razor">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/BlazorDemo.Client/Pages/TP_CRUD/Produit.razor" />
              <option name="originalContent" value="@page &quot;/Produit&quot;&#10;@using BlazorDemo.Client.Components&#10;@using BlazorDemo.Shared.Models&#10;@using ProduitModel = BlazorDemo.Shared.Models.Produit&#10;@inject IProduitServiceClient ProduitService&#10;&#10;&lt;header&gt;&#10;    &lt;h1&gt;Produits&lt;/h1&gt;&#10;&lt;/header&gt;&#10;&#10;&lt;main&gt;&#10;    &lt;section&gt;&#10;        &lt;div class=&quot;actions&quot;&gt;&#10;            &lt;button class=&quot;btn btn-primary&quot; @onclick=&quot;OuvrirModale&quot;&gt;Ajouter un produit&lt;/button&gt;&#10;            &lt;button class=&quot;btn btn-outlined&quot; @onclick=&quot;Charger&quot;&gt;Actualiser&lt;/button&gt;&#10;        &lt;/div&gt;&#10;        &lt;FiltresProduit @bind-Recherche=&quot;_recherche&quot;&#10;                        @bind-CategorieSelectionnee=&quot;_categorieSelectionnee&quot;&#10;                        OnFiltreChange=&quot;@Filtrer&quot; /&gt;&#10;    &lt;/section&gt;&#10;    &lt;TableauProduit Produits=&quot;@ProduitsFiltres&quot;&#10;                    Chargement=&quot;@_chargement&quot;&#10;                    OnRecharger=&quot;@Charger&quot;&#10;                    OnModifier=&quot;@ModifierProduit&quot;&#10;                    OnSupprimer=&quot;@SupprimerProduit&quot;&#10;                    /&gt;&#10;&lt;/main&gt;&#10;&#10;&lt;ModaleProduit Afficher=&quot;@_afficherModale&quot;&#10;               Titre=&quot;@_titreMo dale&quot;&#10;               ProduitAEditer=&quot;@_produitAEditer&quot;&#10;               OnFermer=&quot;@FermerModale&quot;&#10;               OnEnregistrer=&quot;@EnregistrerProduit&quot; /&gt;&#10;&#10;@code {&#10;    private List&lt;ProduitModel&gt; _produits = new();&#10;    private bool _chargement;&#10;    private string _recherche = string.Empty;&#10;    private string _categorieSelectionnee = string.Empty;&#10;    private bool _afficherModale = false;&#10;    private string _titreModale = &quot;Ajouter un produit&quot;;&#10;    private ProduitModel? _produitAEditer = null;&#10;&#10;    private List&lt;ProduitModel&gt; ProduitsFiltres&#10;    {&#10;        get&#10;        {&#10;            var resultats = _produits.AsEnumerable();&#10;&#10;            // Filtre par recherche (nom ou description)&#10;            if (!string.IsNullOrWhiteSpace(_recherche))&#10;            {&#10;                resultats = resultats.Where(p =&gt;&#10;                    p.Nom.Contains(_recherche, StringComparison.OrdinalIgnoreCase) ||&#10;                    (p.Description?.Contains(_recherche, StringComparison.OrdinalIgnoreCase) ?? false)&#10;                );&#10;            }&#10;&#10;            // Filtre par catégorie&#10;            if (!string.IsNullOrWhiteSpace(_categorieSelectionnee))&#10;            {&#10;                resultats = resultats.Where(p =&gt; p.Categorie.ToString() == _categorieSelectionnee);&#10;            }&#10;&#10;            return resultats.ToList();&#10;        }&#10;    }&#10;&#10;    protected override async Task OnInitializedAsync()&#10;    {&#10;        await Charger();&#10;    }&#10;&#10;    private async Task Charger()&#10;    {&#10;        _chargement = true;&#10;        _produits = await ProduitService.ObtenirTousAsync();&#10;        _chargement = false;&#10;    }&#10;&#10;    private void Filtrer()&#10;    {&#10;        // Cette méthode force le rafraîchissement de l'interface&#10;        StateHasChanged();&#10;    }&#10;&#10;    private void OuvrirModale()&#10;    {&#10;        _titreModale = &quot;Ajouter un produit&quot;;&#10;        _produitAEditer = null;&#10;        _afficherModale = true;&#10;    }&#10;&#10;    private void FermerModale()&#10;    {&#10;        _afficherModale = false;&#10;        _produitAEditer = null;&#10;    }&#10;&#10;    private async Task EnregistrerProduit(ProduitDto dto)&#10;    {&#10;        // Créer ou modifier le produit&#10;        if (_produitAEditer != null)&#10;        {&#10;            // Modification&#10;            var resultat = await ProduitService.ModifierAsync(_produitAEditer.Id, dto);&#10;            if (resultat == null)&#10;            {&#10;                Console.WriteLine(&quot;Erreur lors de la modification du produit&quot;);&#10;            }&#10;        }&#10;        else&#10;        {&#10;            // Création&#10;            var resultat = await ProduitService.AjouterAsync(dto);&#10;            if (resultat == null)&#10;            {&#10;                Console.WriteLine(&quot;Erreur lors de l'ajout du produit&quot;);&#10;            }&#10;        }&#10;        &#10;        // Recharger la liste&#10;        await Charger();&#10;        &#10;        // Fermer la modale&#10;        _afficherModale = false;&#10;        _produitAEditer = null;&#10;    }&#10;&#10;    private async Task ModifierProduit(int id)&#10;    {&#10;        // Récupérer le produit à modifier&#10;        _produitAEditer = await ProduitService.ObtenirParIdAsync(id);&#10;        &#10;        if (_produitAEditer != null)&#10;        {&#10;            _titreModale = $&quot;Modifier {_produitAEditer.Nom}&quot;;&#10;            _afficherModale = true;&#10;        }&#10;    }&#10;&#10;    private async Task SupprimerProduit(int id)&#10;    {&#10;        // TODO: Ajouter une confirmation avant suppression&#10;        if (confirm($&quot;Êtes-vous sûr de vouloir supprimer ce produit ?&quot;))&#10;        {&#10;            var succes = await ProduitService.SupprimerAsync(id);&#10;            &#10;            if (succes)&#10;            {&#10;                await Charger();&#10;            }&#10;            else&#10;            {&#10;                Console.WriteLine(&quot;Erreur lors de la suppression du produit&quot;);&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="@page &quot;/Produit&quot;&#10;@using BlazorDemo.Client.Components&#10;@using BlazorDemo.Shared.Models&#10;@using ProduitModel = BlazorDemo.Shared.Models.Produit&#10;@inject IProduitServiceClient ProduitService&#10;&#10;&lt;header&gt;&#10;    &lt;h1&gt;Produits&lt;/h1&gt;&#10;&lt;/header&gt;&#10;&#10;&lt;main&gt;&#10;    &lt;section&gt;&#10;        &lt;div class=&quot;actions&quot;&gt;&#10;            &lt;button class=&quot;btn btn-primary&quot; @onclick=&quot;OuvrirModale&quot;&gt;Ajouter un produit&lt;/button&gt;&#10;            &lt;button class=&quot;btn btn-outlined&quot; @onclick=&quot;Charger&quot;&gt;Actualiser&lt;/button&gt;&#10;        &lt;/div&gt;&#10;        &lt;FiltresProduit @bind-Recherche=&quot;_recherche&quot;&#10;                        @bind-CategorieSelectionnee=&quot;_categorieSelectionnee&quot;&#10;                        OnFiltreChange=&quot;@Filtrer&quot; /&gt;&#10;    &lt;/section&gt;&#10;    &lt;TableauProduit Produits=&quot;@ProduitsFiltres&quot;&#10;                    Chargement=&quot;@_chargement&quot;&#10;                    OnRecharger=&quot;@Charger&quot;&#10;                    OnModifier=&quot;@ModifierProduit&quot;&#10;                    OnSupprimer=&quot;@SupprimerProduit&quot;&#10;                    /&gt;&#10;&lt;/main&gt;&#10;&#10;&lt;ModaleProduit Afficher=&quot;@_afficherModale&quot;&#10;               Titre=&quot;@_titreMo dale&quot;&#10;               ProduitAEditer=&quot;@_produitAEditer&quot;&#10;               OnFermer=&quot;@FermerModale&quot;&#10;               OnEnregistrer=&quot;@EnregistrerProduit&quot; /&gt;&#10;&#10;@code {&#10;    private List&lt;ProduitModel&gt; _produits = new();&#10;    private bool _chargement;&#10;    private string _recherche = string.Empty;&#10;    private string _categorieSelectionnee = string.Empty;&#10;    private bool _afficherModale = false;&#10;    private string _titreModale = &quot;Ajouter un produit&quot;;&#10;    private ProduitModel? _produitAEditer = null;&#10;&#10;    private List&lt;ProduitModel&gt; ProduitsFiltres&#10;    {&#10;        get&#10;        {&#10;            var resultats = _produits.AsEnumerable();&#10;&#10;            // Filtre par recherche (nom ou description)&#10;            if (!string.IsNullOrWhiteSpace(_recherche))&#10;            {&#10;                resultats = resultats.Where(p =&gt;&#10;                    p.Nom.Contains(_recherche, StringComparison.OrdinalIgnoreCase) ||&#10;                    (p.Description?.Contains(_recherche, StringComparison.OrdinalIgnoreCase) ?? false)&#10;                );&#10;            }&#10;&#10;            // Filtre par catégorie&#10;            if (!string.IsNullOrWhiteSpace(_categorieSelectionnee))&#10;            {&#10;                resultats = resultats.Where(p =&gt; p.Categorie.ToString() == _categorieSelectionnee);&#10;            }&#10;&#10;            return resultats.ToList();&#10;        }&#10;    }&#10;&#10;    protected override async Task OnInitializedAsync()&#10;    {&#10;        await Charger();&#10;    }&#10;&#10;    private async Task Charger()&#10;    {&#10;        _chargement = true;&#10;        _produits = await ProduitService.ObtenirTousAsync();&#10;        _chargement = false;&#10;    }&#10;&#10;    private void Filtrer()&#10;    {&#10;        // Cette méthode force le rafraîchissement de l'interface&#10;        StateHasChanged();&#10;    }&#10;&#10;    private void OuvrirModale()&#10;    {&#10;        _titreModale = &quot;Ajouter un produit&quot;;&#10;        _produitAEditer = null;&#10;        _afficherModale = true;&#10;    }&#10;&#10;    private void FermerModale()&#10;    {&#10;        _afficherModale = false;&#10;        _produitAEditer = null;&#10;    }&#10;&#10;    private async Task EnregistrerProduit(ProduitDto dto)&#10;    {&#10;        // Créer ou modifier le produit&#10;        if (_produitAEditer != null)&#10;        {&#10;            // Modification&#10;            var resultat = await ProduitService.ModifierAsync(_produitAEditer.Id, dto);&#10;            if (resultat == null)&#10;            {&#10;                Console.WriteLine(&quot;Erreur lors de la modification du produit&quot;);&#10;            }&#10;        }&#10;        else&#10;        {&#10;            // Création&#10;            var resultat = await ProduitService.AjouterAsync(dto);&#10;            if (resultat == null)&#10;            {&#10;                Console.WriteLine(&quot;Erreur lors de l'ajout du produit&quot;);&#10;            }&#10;        }&#10;        &#10;        // Recharger la liste&#10;        await Charger();&#10;        &#10;        // Fermer la modale&#10;        _afficherModale = false;&#10;        _produitAEditer = null;&#10;    }&#10;&#10;    private async Task ModifierProduit(int id)&#10;    {&#10;        // Récupérer le produit à modifier&#10;        _produitAEditer = await ProduitService.ObtenirParIdAsync(id);&#10;        &#10;        if (_produitAEditer != null)&#10;        {&#10;            _titreModale = $&quot;Modifier {_produitAEditer.Nom}&quot;;&#10;            _afficherModale = true;&#10;        }&#10;    }&#10;&#10;    private async Task SupprimerProduit(int id)&#10;    {&#10;        // TODO: Ajouter une confirmation avant suppression&#10;        if (confirm($&quot;Êtes-vous sûr de vouloir supprimer ce produit ?&quot;))&#10;        {&#10;            var succes = await ProduitService.SupprimerAsync(id);&#10;            &#10;            if (succes)&#10;            {&#10;                await Charger();&#10;            }&#10;            else&#10;            {&#10;                Console.WriteLine(&quot;Erreur lors de la suppression du produit&quot;);&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>